# Prompt Engineer 技能说明

## 🎯 技能功能

这是一个基于提示词工程规则的技能，用于将用户提供的原始提示词整理、重构为高约束、低歧义、可被图像生成模型稳定遵循的提示词。

## 📦 安装

```bash
# 从本地安装（测试）
llmi install file:///path/to/llm-inline/skill-examples/prompt-engineer/skill.json

# 从GitHub安装（生产）
llmi install https://raw.githubusercontent.com/iblueer/llm-inline/main/skill-examples/prompt-engineer/skill.json
```

## 💡 使用方法

### 基本用法
```bash
llmi prompt-engineer "一个美丽的女孩，穿着红色的裙子，在花园里"
```

### 输出格式

技能将输出结构化的提示词：

```
🔍 原始提示词:
============================================================
一个美丽的女孩，穿着红色的裙子，在花园里
============================================================

🔧 正在进行提示词工程优化...

✨ 优化后的提示词:
============================================================

【不可变规则】
- ...

【构图与空间约束】
- ...

【主体与结构约束】
- ...

【风格与表现】
- ...
============================================================
```

## ⚠️ 重要说明

### 关于输入类型

本技能专为**文本提示词优化**设计，不是图像处理技能：

- ✅ **支持**: 纯文本提示词描述
- ✅ **支持**: 模糊描述转为明确约束
- ❌ **不支持**: 直接处理图像文件
- ❌ **不支持**: 图像间的对比替换

### 如果您需要处理图像...

如果您的需求是类似 "将图1中的设备替换为图2的样式"，这需要：
1. **图像理解** - 分析两张图片的特征
2. **提示词生成** - 基于分析生成新的提示词
3. **图像生成** - 使用优化后的提示词生成新图像

本技能只负责第2步：**生成优化的提示词**。

## 🔧 技能特性

基于 `skill-examples/prompt.md` 的规则，本技能严格遵循：

1. **不新增**任何用户未明确提出的设计要素
2. **不进行**审美发挥或补充创意
3. 将**模糊描述**改写为明确、可执行的约束
4. 将**否定式描述**改写为正向、枚举式描述
5. **保留冲突**用【需要确认】标注，不自行假设

## 📝 使用示例

### 示例1：简单场景描述
```bash
llmi prompt-engineer "阳光明媚的海滩，蓝天白云"
```

### 示例2：产品设计
```bash
llmi prompt-engineer "现代风格的智能手机，全屏设计，黑色外壳"
```

### 示例3：复杂场景
```bash
llmi prompt-engineer "赛博朋克风格的城市夜景，霓虹灯光，忙碌的街道，下雨的氛围"
```

## 🔍 问题解决

### 如果技能无法调用

确保主程序已更新，修复了硬编码白名单问题：

```bash
# 检查是否已安装
llmi list

# 如果没看到 prompt-engineer，重新安装
llmi install file:///path/to/llm-inline/skill-examples/prompt-engineer/skill.json
```

### 主程序修复内容

旧版主程序使用硬编码白名单：
```python
elif first_arg in ['use', 'translate', 'list', 'install']:  # ❌ 白名单
```

新版使用动态检测：
```python
elif load_skill(first_arg):  # ✅ 动态检测所有已安装技能
```

这样任何新安装的技能都能被正确识别和执行。